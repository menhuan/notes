<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>在线微信对话生成器_微信红包对话生成器_微信聊天生成器</title>
  <meta name="keywords" content="微信对话生成器,在线微信对话生成器,微信对话生成器在线,微信聊天生成器,微信红包对话生成器,微信红包截图生成器" />
  <meta name="description" content="在线制作微信对话生成器和支付宝转账，可以生成微信转账、支付宝聊天、微信余额、微信零钱、微信红包、在线聊天等仿真截图，一款微商截图装逼神器" />
  <meta name="renderer" content="webkit">
  <meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    name="viewport">
  <meta content="telephone=no, address=no" name="format-detection">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta http-equiv="Expires" content="0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-control" content="no-cache">
  <meta http-equiv="Cache" content="no-cache">
  <link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- MetisMenu CSS -->
  <link href="css/metismenu.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="css/sb-admin-2.css" rel="stylesheet">


  <!-- Custom Fonts -->
  <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <link href="css/datetimepicker.css" rel="stylesheet" type="text/css">
  <link href="css/datetimepicker_blue.css" rel="stylesheet" type="text/css">
  <link href="css/dropdown.css" rel="stylesheet" type="text/css">

  <link rel="stylesheet" type="text/css" href="css/common.css">
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
<script src="js/html5shiv.js"></script>
<script src="js/respond.min.js"></script>
<![endif]-->

  <!-- jQuery -->
  <script src="js/jquery-1.10.2.min.js"></script>
  <script>
    var is_check_brower = true;
    var is_mobile = '';
    var image_type = 0;
  </script>

  <!-- Bootstrap Core JavaScript -->
  <script src="js/bootstrap.min.js"></script>
  <!-- Metis Menu Plugin JavaScript -->
  <script src="js/metismenu.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="js/bootstrap-datetimepicker.min.js"></script>
  <script type="text/javascript" src="js/bootstrap-datetimepicker.zh-cn.js" charset="UTF-8"></script>
  <script src="js/jquery.sglide.js"></script>
  <script src="js/sb-admin-2.js"></script>
  <script type="text/javascript" src="js/html2canvas.min.js"></script>
  <script type="text/javascript" src="js/emoji.js"></script>
  <script type="text/javascript" src="js/functions.js"></script>
  <script type="text/javascript" src="js/common.js"></script>
  <script src="js/bootbox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="css/m.css">
  <script>
    $(function () {
      $('#btn-menu').click(function () {
        $('.sidebar-nav').toggle();
      });
    });
  </script>
  <link rel="stylesheet" type="text/css" href="css/wx2019.css">
  <style>
    .modal-dialog {
      z-index: 2048;
    }

    #bglist li {
      list-style: none;
      float: left;
      margin: 5px;
    }

    #bglist li img {
      height: 200px;
    }
  </style>
</head>

<body>

  <div id="wrapper">
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
      <!-- 头部 -->
      <div class="navbar-header">
        <a href="/wxduihua.html" class="top-logo">微信对话</a>
        <a href="javascript:;" id="btn-menu">Menu</a>

      </div>
      <!-- /.navbar-header -->

      <ul class="nav navbar-top-links navbar-right">

        <!--<li>
            <a class="btn-login-register" href="" target="_bank">
                <i class="fa fa-check fa-fw"></i>微微二维码生成器
            </a>
        </li>
        <li>
            <a class="btn-login-register" href="" target="_bank">
                <i class="fa fa-check fa-fw"></i>语音码
            </a>
        </li>
        <li>
            <a class="btn-login-register" href="" target="_bank">
                <i class="fa fa-check fa-fw"></i>多媒体码
            </a>
        </li>
        <li>
            <a class="btn-login-register" href="" target="_bank">
                <i class="fa fa-check fa-fw"></i>二维码生成器
            </a>
        </li>-->
        <!-- <li><a href="/wxlogin.html"><i class="fa fa-sign-in fa-fw"></i> 登录 / 注册</a></li> -->
      </ul>
      <!-- /.navbar-top-links -->

      <div class="navbar-default sidebar" role="navigation">
        <div class="sidebar-nav navbar-collapse collapse">
          <ul class="nav" id="side-menu">
            <!-- <li class="active">
                    <a href="/"><i class="fa fa-home fa-fw"></i> 首页</a>
                </li> -->
            <li class="active">
              <a href="javascript:;"><i class="fa fa-wechat fa-fw"></i> 微信 - <span style="color:red">2019
                  最新版</span><span class="fa arrow"></span></a>
              <ul class="nav nav-second-level">
                <li>
                  <a href="./default.html">微信对话生成
                    <!-- <b style="color: #ff0000!important">可发图</b> -->
                  </a>
                </li>
                <li>
                  <a href="./wxpay.html">微信转账详情生成</a>
                </li>
                <li>
                  <a href="./wxwallet.html">微信零钱页面生成</a>
                </li>
                <!-- <li>
                  <a target="_blank"
                    href="http://www.videaba.com/index.php?s=/Home/Article/detail/id/127464.html">制作教程</a>
                </li> -->
              </ul>
              <!-- /.nav-second-level -->
            </li>
            <!-- <li class="active">
              <a href="javascript:;"><i class="fa fa-shield fa-fw"></i> 支付宝 - <span style="color:red">2020
                  最新版</span><span class="fa arrow"></span></a>
              <ul class="nav nav-second-level">
                <li>
                  <a href="/alipay2020.html">支付宝转账生成<span style="color:red">2020最新</span></a>
                </li>
                <li>
                  <a href="/alipay.html">支付宝转账生成2019</a>
                </li>
                <li>
                  <a href="/balance.html">支付宝账户余额生成</a>
                </li>
              </ul>
            </li> -->
            <!-- <li>
              <a href="/qr.html">
                <i class="fa fa-qrcode fa-fw"></i> <span style="color: red;">合成二维码</span></a>
            </li> -->
            <!--<li class="active">
                    <a href="javascript:;"><i class="fa fa-link fa-fw"></i> 实用工具<span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a href="">二维码解码器</a>
                        </li>
                        <li>
                            <a href="">图片转文字</a>
                        </li>
                        <li>
                            <a href="">图片gps信息查看</a>
                        </li>
                    </ul>
                </li>
                <li class="active" style="margin-top:20px;">
                    <a  href="" target="_blank"> 免费美化二维码</a>
                </li>-->

          </ul>
        </div>
        <!-- /.sidebar-collapse -->
      </div>
      <!-- /.navbar-static-side -->
      <!-- /头部 -->
    </nav>

    <!-- 主体 -->
    <div id="page-wrapper">

      <div class="row">
        <div class="col-lg-12">
          <h3 class="page-header">微信对话生成</h3>
        </div>
      </div>



      <div class="row" style="position:relative;padding: 0 15px;">
        <div class="panel-body panel-wx-tab">
          <!-- Nav tabs -->
          <ul class="nav nav-tabs">
            <li class="active"><a href="#w1" data-toggle="tab">外观设置</a></li>
            <li><a href="#w2" data-toggle="tab">对话设置</a></li>
          </ul>
          <!-- Tab panes -->
          <div class="tab-content">
            <div class="tab-pane fade in active" id="w1">
              <div class="setting">



                <p>
                  <span>信号强度：</span>
                  <select class="slt-common" data-class="i-signal">
                    <option value="i-signal1">1格</option>
                    <option value="i-signal2">2格</option>
                    <option value="i-signal3">3格</option>
                    <option value="i-signal4">4格</option>
                    <option selected value="i-signal5">5格</option>
                  </select>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  <span>运营商：</span>
                  <select class="slt-common" data-class="i-carrier">
                    <option value="i-c-yd">中国移动</option>
                    <option value="i-c-lt">中国联通</option>
                    <option value="i-c-dx">中国电信</option>
                  </select>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  <span>网络信号：</span>
                  <select class="slt-common" data-class="i-network">
                    <option value="">无</option>
                    <option selected value="i-n-wifi">Wifi</option>
                    <option value="i-n-4g">4G</option>
                    <option value="i-n-5g">5G</option>
                  </select>
                </p>
                <p>
                  <span>手机时间：</span>
                  <select class="slt-phone-time slt-p-shi">
                    <option>-</option>
                    <option>上午</option>
                    <option>下午</option>
                  </select>
                  <select class="slt-phone-time slt-p-hour">
                  </select> :
                  <select class="slt-phone-time slt-p-minite">
                  </select>
                </p>
                <p>
                  <span>锁定旋转：</span>
                  <label><input class="rd-common" data-class="i-top-dir" type="radio" name="top-dir" value="1"
                      checked /> 显示</label>
                  <label><input class="rd-common" data-class="i-top-dir" type="radio" name="top-dir" value="0" />
                    不显示</label>
                </p>
                <div style="margin: 0 0 10px;margin-top: 20px;">
                  <span>电量：</span>
                  <div class="slider_bar"></div>
                </div>
                <p>
                  <span>电池状态：</span>
                  <select class="slt-common" data-class="i-top-berry">
                    <option value="">正常</option>
                    <option value="i-top-berry2">充电中</option>
                  </select>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  <span>电池百分比：</span>
                  <label><input class="rd-common" data-class="i-top-berry-num" type="radio" name="i-top-berry-num"
                      value="1" checked /> 显示</label>
                  <label><input class="rd-common" data-class="i-top-berry-num" type="radio" name="i-top-berry-num"
                      value="0" /> 不显示</label>
                </p>
                <p>
                  <span>聊天模式：</span>
                  <select class="slt-common" data-class="i-n-user">
                    <option value="">单聊</option>
                    <option value="i-n-user-group">群聊</option>
                  </select>
                </p>
                <p>
                  <span>聊天标题：</span>
                  <input type="text" value="微信对话制作" data-class="i-n-name span" class="input-common" /> 群聊模式(括号)里是群聊人数
                </p>
                <p>
                  <span>消息数目：</span>
                  <input type="text" value="" class="input-i-n-count" />
                  <a class="btn-del-i-n-count" href="#">删除数目</a>
                </p>
                <p>
                  <span>显示用户昵称：</span>
                  <label><input class="rd-common radio-i-b-nick" data-class="i-b-nick" type="radio" name="i-b-nick"
                      value="0" checked /> 不显示</label>
                  <label><input class="rd-common radio-i-b-nick" data-class="i-b-nick" type="radio" name="i-b-nick"
                      value="1" /> 显示</label>
                </p>
                <p>
                  <span>是否可手动删消息：</span>
                  <label><input class="rd-common1 radio-i-b-nick1" data-class="i-b-nick1" type="radio" name="i-b-nick1"
                      value="0" checked /> 是</label>
                  <label><input class="rd-common1 radio-i-b-nick1" data-class="i-b-nick1" type="radio" name="i-b-nick1"
                      value="1" /> 否</label>
                </p>
                <p>
                  <span>底部输入框：</span>
                  <select class="slt-common" data-class="i-bottom">
                    <option value="">文本模式</option>
                    <option value="i-bottom2">语音模式</option>
                  </select>
                </p>
                <div style="overflow:hidden;margin:20px 0 40px 0;">


                  <div class="a-u-pic a-u-pic-bodybg">
                    <div class="a-u-pic-show">
                      <input type="file" data-callback="set_body_bg" accept="image/jpeg,image/x-png">
                    </div>
                  </div>

                  <div>
                    背景图片<span style="color:#f00">(图片大小:宽640 x 高1136)</span>
                    <br />
                    <!--<button type="button" class="btn btn-primary btn-bgModal" data-toggle="modal" data-target="#bgModal">选择背景</button>
                <br/>-->
                    <a class="body_bg_del btn btn-danger btn_no_water" href="#">删除背景</a>
                  </div>

                  <!-- #bgModal -->
                  <div class="modal fade" id="bgModal" role="dialog" aria-labelledby="myModalLabel">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                              aria-hidden="true">&times;</span></button>
                          <h4 class="modal-title" id="myModalLabel">选择背景</h4>
                        </div>
                        <div class="modal-body">
                          <div id="bglist">
                            <!--li><a href="javascript:void(0);"><img src="picture/1.jpeg" ></a></li-->
                          </div>
                          <div style="clear:both"></div>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="w2">
              <div class="setting">
                <p style="border-bottom:1px #ccc dotted;padding-bottom:10px;">
                  <span>添加聊天时间：</span>
                  <select class="slt-year">
                    <option>-</option>
                    <option>2019</option>
                    <option>2018</option>
                    <option>2017</option>
                    <option>2016</option>
                    <option>2015</option>
                    <option>2014</option>
                    <option>2020</option>
                  </select>年
                  <select class="slt-month">
                    <option>-</option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                    <option>9</option>
                    <option>10</option>
                    <option>11</option>
                    <option>12</option>
                  </select>月
                  <select class="slt-day">
                    <option>-</option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                    <option>9</option>
                    <option>10</option>
                    <option>11</option>
                    <option>12</option>
                    <option>13</option>
                    <option>14</option>
                    <option>15</option>
                    <option>16</option>
                    <option>17</option>
                    <option>18</option>
                    <option>19</option>
                    <option>20</option>
                    <option>21</option>
                    <option>22</option>
                    <option>23</option>
                    <option>24</option>
                    <option>25</option>
                    <option>26</option>
                    <option>27</option>
                    <option>28</option>
                    <option>29</option>
                    <option>30</option>
                    <option>31</option>
                  </select>日
                  <select class="slt-xinqi">
                    <option>-</option>
                    <option>昨天</option>
                    <option>星期一</option>
                    <option>星期二</option>
                    <option>星期三</option>
                    <option>星期四</option>
                    <option>星期五</option>
                    <option>星期六</option>
                    <option>星期日</option>
                  </select>
                  <select class="slt-shi">
                    <option>-</option>
                    <option>上午</option>
                    <option>下午</option>
                    <option>凌晨</option>
                  </select>
                  <select class="slt-hour">
                  </select> :
                  <select class="slt-minite">
                  </select> &nbsp;
                  <a class="add-time-btn btn btn-primary btn-sm" href="#">添加</a>
                </p>
                <div class="users">
                  <div class="add-user">
                    <div class="a-u-pic">
                      <div class="a-u-pic-show"><input type="file" accept="image/jpeg,image/x-png"></div>
                    </div>
                    <div class="a-u-name">
                      <p><span>用户名：</span><input class="a-u-data-name" type="text" value=""></p>
                      <p><span>聊天内容：</span><textarea class="a-u-content1602038909210"></textarea><a
                          class="a-u-face btn-add-face" data-input="a-u-content1602038909210" href="#">表情</a></p>
                      <p><span>红包祝福语：</span><input class="a-u-data-redpacket" type="text" value="恭喜发财，大吉大利！"></p>
                      <p><span>转账/收钱金额：</span><input class="a-u-data-pay" type="text" value=""></p>
                      <p><span>语音时间：</span><input class="a-u-data-voice" type="text" value=""></p>
                      <p><input style="margin-right:5px;" class="btn-rand-username" type="button" value="随机用户名"><input
                          class="btn-rand-face" type="button" value="随机头像"></p>
                      <p></p>
                      <div class="a-u-pic-pic">
                        <div class="a-u-pic-show-pic"><input type="file" class="a-u-data-pic"
                            accept="image/jpeg,image/x-png"></div>
                      </div>
                      <p></p>
                    </div>
                    <div class="a-u-dialog" style="clear:both;"><a class="btn btn-primary" data-type="left"
                        href="#">添加文字对话</a></div>
                    <div class="a-u-dialog-pic"><a class="btn btn-warning" data-type="left" href="#">添加图片对话</a></div>
                    <div class="a-u-dialog-voice"><a class="btn btn-primary" data-type="left" href="#">添加语音对话</a></div>
                    <div class="a-u-dialog-sedpacket"><a class="btn btn-danger" data-type="left" href="#">添加发红包对话</a>
                    </div>
                    <div class="a-u-dialog-redpacket"><a class="btn btn-danger" data-type="left" href="#">添加收红包对话</a>
                    </div>
                    <div class="a-u-dialog-pay"><a class="btn btn-primary" data-dir="send" data-type="left"
                        href="#">添加转账对话</a></div>
                    <div class="a-u-dialog-pay"><a class="btn btn-primary" data-dir="rec" data-type="left"
                        href="#">添加收钱对话</a></div>
                    <div class="a-u-dialog-master"><a class="btn btn-primary" href="#">设为主人</a></div>
                    <div class="a-u-dialog-del"><a class="btn btn-danger" href="#">删除用户</a></div>
                  </div>
                </div>
                <div class="btns">
                  <input id="add-user" class="btn btn-success" type="button" value="添加用户" />
                  <input class="btn btn-success clear-dialog" type="button" value="清除对话" />
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="my-btns">
          <div class="loading">正在生成，请稍候......</div>
          <input id="save" class="btn btn-primary" type="button" value="生成图片" />
          <a id="btn-water" class="btn btn-danger btn_no_water" target="_blank" href="http://www.12tool.com/pay">充值</a>
          <i style="margin-left:10px;">如充值成功,请点击左侧[生成图片]按钮</i>
        </div> -->
        <div class="phone-wrap">
          <div id="iphone" class="iphone iphone-preview">
            <div class="i-top">
              <div class="i-top-elm i-signal"></div>
              <div class="i-top-elm i-carrier i-c-yd"></div>
              <div class="i-top-elm i-network i-n-wifi"></div>
              <div class="i-top-elm i-top-time">00:00</div>
              <div class="i-top-elm-r i-top-berry"><i><em></em></i></div>
              <div class="i-top-elm-r i-top-berry-num">50%</div>
              <div class="i-top-elm-r i-top-dir"></div>
              <div class="i-nav">
                <div class="i-n-back">
                  <div class="i-n-count"></div>
                </div>
                <div class="i-n-name">
                  <span>微信对话制作</span>
                  <i class="i-n-ear" style="display:none">&nbsp;</i>
                </div>
              </div>
            </div>
            <div class="i-body">
              <div class="i-b-sen-text"><img src="picture/14.jpg">
                <div class="redpacket">
                  <div class="content"><i class="arraw"><b></b></i>
                    <div class="main clear-div"><i class="icon"></i>
                      <h3>恭喜发财，大吉大利！</h3>
                    </div>
                    <div class="clear-div foot">
                      <h3>微信红包</h3>
                    </div><a class="msg-del"></a>
                  </div>
                </div>
              </div>
              <div class="i-b-time"><span><img src="picture/a-redpacket-icon.png" class="icon_redpacket"> 冷夕颜领取了你的<a
                    class="orange">红包</a></span><a class="msg-del"></a></div>
              <div class="i-b-rec-text"><img src="picture/33.jpg">
                <div>
                  <p class="i-b-nick" style="display: none;">擦掉眼泪我依旧是王</p>
                  <span><i></i><em>这个是示例对话哦，你先点击右上角绿色的“清除对话”按钮，然后切换到对话设置那里，添加你要的对话类型就行了，需要多个用户进行对话请点击“添加用户”按钮添加用户，然后添加对话即可<img
                        class="qq_emoji" src="picture/expression_22@2x.png"></em><a class="msg-del"></a></span>
                </div>
              </div>
              <div class="i-b-time"><span>昨天 08:33</span><a class="msg-del"></a></div>
              <div class="i-b-rec-text"><img src="picture/33.jpg">
                <div class="i-b-pay">
                  <p class="i-b-nick" style="display: none;">扬眉淡看</p><span class="i-pay-send"><i></i><em>88.88</em><a
                      class="msg-del"></a></span>
                </div>
              </div>
              <div class="i-b-sen-text"><img src="picture/14.jpg">
                <div class="i-b-pay"><span class="i-pay-rec"><i></i><em>88.88</em><a class="msg-del"></a></span></div>
              </div>
            </div>
            <div class="i-bottom i-bottom-wechat">

            </div>
          </div>
        </div>
      </div>

      <div class="emojiPanel" id="emojiPanel">
        <ul class="faceTab">
          <li><a class="chooseFaceTab" href="javascript:;">QQ表情</a></li>
          <!--<li><a href="javascript:;">符号表情</a></li>
        <li><a href="javascript:;">动画表情</a></li>-->
        </ul>
        <div class="faceWrap" style="zoom:1;outline:none;">
          <div class="faceBox emojiArea"></div>
        </div>
      </div>

      <script type="text/javascript">
        set_water();
        setInterval(function () {
          set_water();
        }, 2000);
        //消息数目
        var i_n_count = randomString(1);
        if (i_n_count > 0) {
          $('.input-i-n-count').val(i_n_count);
          $('.i-n-count').text(i_n_count);
        }
        $('.input-i-n-count').bind('input propertychange', function () {
          var val = $(this).val();
          if (isNaN(val) || val == 0) {
            $('.i-n-count').text('');
            return false;
          }
          val = $(this).val();
          $('.i-n-count').text(val);
        });
        $('.btn-del-i-n-count').click(function () {
          $('.i-n-count').text('');
          $('.input-i-n-count').val('');
          return false;
        });

        $('body').on('click', '.a-u-dialog a', function () {
          var user = $(this).parents('.add-user');
          var index = user.index();
          var name = user.find('.a-u-name .a-u-data-name').val();
          var content = user.find('.a-u-name textarea').val();
          var img = $(this).parent().parent().find('.a-u-pic-show img').clone();
          var type = user.find('.a-u-dialog-master a').hasClass('btn-success');

          if (name == '') {
            alert('请输入用户名！');
            return false;
          }

          if (content == '') {
            alert('请输入聊天内容！');
            return false;
          }

          if (!img.length) {
            img = '<img src="images/default-head.png" />';
          }

          content = replace_qq_emoji(content);

          var msg_class = type ? 'i-b-sen-text' : 'i-b-rec-text';
          var nick = type ? '' : '<p class="i-b-nick">' + name + '</p>';

          var dialog = $('<div class="' + msg_class + '"><div>' + nick + '<span><i></i><em>' + content + '</em><a class="msg-del"></a></span></div></div>');
          dialog.prepend(img);
          $('.i-body').append(dialog);
          //显示名称
          $(".radio-i-b-nick:checked").click();
          return false;
        });

        $('.add-time-btn').click(function () {
          var year = $('.slt-year option:selected').val();
          var month = $('.slt-month option:selected').val();
          var day = $('.slt-day option:selected').val();
          var xinqi = $('.slt-xinqi option:selected').val();
          var shi = $('.slt-shi option:selected').val();
          var hour = $('.slt-hour option:selected').val();
          var minite = $('.slt-minite option:selected').val();
          var str = '';
          if (year != '-')
            str += year + '年';
          if (month != '-')
            str += month + '月';
          if (day != '-')
            str += day + '日 ';
          if (xinqi != '-')
            str += xinqi + ' ';
          if (shi != '-')
            str += shi;
          str += hour + ':';
          str += minite;
          var html = '<div class="i-b-time"><span>' + str + '</span><a class="msg-del"></a></div>';
          $('.i-body').append(html);
          return false;
        });

        var set_body_bg = function () {
          var img = $('.a-u-pic-bodybg img');
          var src = img.attr('src');
          $('.i-body').css('background-image', 'url(' + src + ')');

        }


        $('body').on('change', '.a-u-pic-show input', function () {
          var img = document.createElement('img');//创建 img 对象
          var _this = $(this);
          var callback = _this.attr('data-callback');

          window.URL = window.URL || window.webkitURL;

          var imgFile = $(this).get(0);

          if (window.URL && imgFile.files[0]) {
            var reader = new FileReader();
            reader.readAsDataURL(imgFile.files[0]);
            reader.onload = function (e) {
              var img = '<img src="' + this.result + '" alt=""/>';
              _this.parent().find('img').remove();
              _this.parent().append(img);

              if (callback) {
                eval(callback + '()');
              }
            }
          }
        });

        //图片对话上传图片
        $('body').on('change', '.a-u-pic-show-pic input', function () {
          var img = document.createElement('img');//创建 img 对象
          var _this = $(this);
          var callback = _this.attr('data-callback');

          window.URL = window.URL || window.webkitURL;

          var imgFile = $(this).get(0);

          if (window.URL && imgFile.files[0]) {
            var reader = new FileReader();
            reader.readAsDataURL(imgFile.files[0]);
            reader.onload = function (e) {
              var img = '<img src="' + this.result + '" alt=""/>';
              //console.log($(img));console.log($($(img)[0]));console.log($($(img)[0]).width());alert($(img)[0].width+"==bbb");
              var img1 = document.createElement('img');//创建 img 对象
              $(img1).attr("src", this.result).load(function () {
                $(img1).attr("data-width", this.width).attr("data-height", this.height);
                _this.parent().find('img').remove();
                _this.parent().append(img1);
              });
              //_this.parent().find('img').remove();
              //_this.parent().append(img);

              if (callback) {
                eval(callback + '()');
              }
            }
          }
        });

        //添加图片对话
        var pic_i = 0;
        $('body').on('click', '.a-u-dialog-pic a', function () {
          $('.i-body').css('background', 'none');
          var user = $(this).parents('.add-user');
          var name = user.find('.a-u-name .a-u-data-name').val();
          var img = $(this).parent().parent().find('.a-u-pic-show img').clone();
          var pic = $(this).parent().parent().find('.a-u-pic-show-pic img').clone();
          var type = user.find('.a-u-dialog-master a').hasClass('btn-success');
          pic_i = pic_i + 1;
          if (name == '') {
            alert('请输入用户名！');
            return false;
          }

          if (!pic.length) {
            alert('您没有上传图片！');
            return false;
          }

          if (!img.length) {
            img = '<img src="/Public/Home/images/face/default-head.png" />';
          }

          var wrap_class = !type ? 'i-b-rec-text' : 'i-b-sen-text';
          var nick = type ? '' : '<p class="i-b-nick">' + name + '</p>';
          var pic_type = !type ? 'wx_pic_pos2' : 'wx_pic_pos';

          var unread = '';//type ? '' : '<strong></strong>';

          var span_height = pic.attr('data-height') / (pic.attr('data-width') / 209);

          var html = $('<div class="' + wrap_class + '"><div class="i-b-voice">' + nick + '<span class="wx_pic_diy" id="s' + pic_i + '" style="height:' + span_height + 'px"><h6 class="' + pic_type + '"></h6><a class="msg-del"></a></span></div></div>');

          html.prepend(img);

          $('.i-body').append(html);

          $('#s' + pic_i).prepend(pic);


          return false;
        });

        //添加用户
        $('#add-user').click(function () {
          var time = (new Date()).valueOf();
          var html = $('<div class="add-user"><div class="a-u-pic"><div class="a-u-pic-show"><input type="file" accept="image/jpeg,image/x-png" /></div></div><div class="a-u-name"><p><span>用户名：</span><input class="a-u-data-name" type="text" value="" /></p><p><span>聊天内容：</span><textarea class="a-u-content' + time + '"></textarea><a class="a-u-face btn-add-face" data-input="a-u-content' + time + '" href="#">表情</a></p><p><span>红包祝福语：</span><input class="a-u-data-redpacket" type="text" value="恭喜发财，大吉大利！"></p><p><span>转账/收钱金额：</span><input class="a-u-data-pay" type="text" value="" /></p><p><span>语音时间：</span><input class="a-u-data-voice" type="text" value="" /></p><p><input style="margin-right:5px;" class="btn-rand-username" type="button" value="随机用户名" /><input class="btn-rand-face" type="button" value="随机头像" /></p><p><div class="a-u-pic-pic"><div class="a-u-pic-show-pic"><input type="file" class="a-u-data-pic" accept="image/jpeg,image/x-png"></div></div></p></div><div class="a-u-dialog" style="clear:both;"><a class="btn btn-primary" data-type="left" href="#">添加文字对话</a></div><div class="a-u-dialog-pic"><a class="btn btn-warning" data-type="left" href="#">添加图片对话</a></div><div class="a-u-dialog-voice"><a class="btn btn-primary" data-type="left" href="#">添加语音对话</a></div><div class="a-u-dialog-sedpacket"><a class="btn btn-danger" data-type="left" href="#">添加发红包对话</a></div><div class="a-u-dialog-redpacket"><a class="btn btn-danger" data-type="left" href="#">添加收红包对话</a></div><div class="a-u-dialog-pay"><a class="btn btn-primary" data-dir="send" data-type="left" href="#">添加转账对话</a></div><div class="a-u-dialog-pay"><a class="btn btn-primary" data-dir="rec" data-type="left" href="#">添加收钱对话</a></div><div class="a-u-dialog-master"><a class="btn btn-primary" href="#">设为主人</a></div><div class="a-u-dialog-del"><a class="btn btn-danger" href="#">删除用户</a></div></div>');
          $('.users').append(html);
          html.find('.btn-rand-username').click();
        });

        //删除用户
        $('body').on('click', '.a-u-dialog-del', function () {
          if (confirm('您确认要删除？')) {
            $(this).parents('.add-user').remove();
          }
          return false;
        });

        /*$('body').on('mouseover','.i-b-time,.i-b-rec-text,.i-b-sen-text',function(){
        $(this).find('.msg-del').show();
        });
        $('body').on('mouseout','.i-b-time,.i-b-rec-text,.i-b-sen-text',function(){
        $(this).find('.msg-del').hide();
        });*/



        $('body').on('click', '.msg-del', function () {
          $(this).parents('.i-b-time,.i-b-rec-text,.i-b-sen-text').remove();
        });

        $('.clear-dialog').click(function () {
          if (confirm('您确认要清除所有对话？')) {
            $('.i-b-time,.i-b-rec-text,.i-b-sen-text').remove();
          }
        });

        //添加发红包对话
        $('body').on('click', '.a-u-dialog-sedpacket a', function () {
          var user = $(this).parents('.add-user');
          var type = user.find('.a-u-dialog-master a').hasClass('btn-success');
          var index = user.index();
          var name = user.find('.a-u-name .a-u-data-name').val();
          var redpacket = user.find('.a-u-name .a-u-data-redpacket').val();
          var img = $(this).parent().parent().find('.a-u-pic-show img').clone();

          if (name == '') {
            alert('请输入用户名！');
            return false;
          }

          if (redpacket == '') {
            redpacket = '恭喜发财，大吉大利！';
          }

          if (!img.length) {
            img = '<img src="/Public/Home/images/face/default-head.png" />';
          }

          var wrap_class = !type ? 'i-b-rec-text' : 'i-b-sen-text';
          var nick = type ? '' : '<p class="i-b-nick">' + name + '</p>';

          var html = $('<div class="' + wrap_class + '"><div class="redpacket">' + nick + '<div class="content"><i class="arraw"><b></b></i><div class="main clear-div"><i class="icon"></i><h3>' + redpacket + '</h3></div><div class="clear-div foot"><h3>微信红包</h3></div><a class="msg-del"></a></div></div></div>');
          html.prepend(img);
          $('.i-body').append(html);

          return false;
        });

        //添加收红包对话
        $('body').on('click', '.a-u-dialog-redpacket a', function () {
          var user = $(this).parents('.add-user');
          var type = user.find('.a-u-dialog-master a').hasClass('btn-success');
          var name = user.find('.a-u-name .a-u-data-name').val();
          var user_num = $(this).parents().parents().find('.add-user').length;
          if (type) {
            $(this).parents().parents().find('.add-user').each(function (index, element) {
              if ($(this).find('.a-u-dialog-master a').hasClass('btn-success')) {
                indexs = index;
                return false;
              }
            });
            var rand = get_random_num(0, user_num - 1);
            if (rand == indexs) {
              rand = (rand < (user_num - 1)) ? rand + 1 : rand - 1;
            }
            name = $($(this).parents().parents().find('.add-user')[rand]).find('.a-u-name .a-u-data-name').val();
          }


          var word = !type ? name + '领取了你的' : '你领取了' + name + '的';
          var nick = type ? '' : '<p class="i-b-nick">' + name + '</p>';

          //var html = $('<div class="' + wrap_class + '"><div class="redpacket">' + nick + '<div class="content"><i class="arraw"><b></b></i><div class="main clear-div"><i class="icon"></i><h3>' + redpacket + '</h3><h4>领取红包</h4></div><div class="clear-div foot"><h3>微信红包</h3></div><a class="msg-del"></a></div></div></div>');
          var html = $('<div class="i-b-time"><span><img src="./images/a-redpacket-icon.png" class="icon_redpacket"> ' + word + '<a class="orange">红包</a></span><a class="msg-del"></a></div>');
          $('.i-body').append(html);

          return false;
        });

        //添加转账对话
        $('body').on('click', '.a-u-dialog-pay a', function () {
          var dir = $(this).attr('data-dir');
          var user = $(this).parents('.add-user');
          var type = user.find('.a-u-dialog-master a').hasClass('btn-success');
          var index = user.index();
          var name = user.find('.a-u-name .a-u-data-name').val();
          var pay = user.find('.a-u-name .a-u-data-pay').val();
          var img = $(this).parent().parent().find('.a-u-pic-show img').clone();

          if (name == '') {
            alert('请输入用户名！');
            return false;
          }

          if (pay == '') {
            alert('请输入转账/收钱金额！');
            return false;
          }

          if (isNaN(pay)) {
            alert('您输入的金额有误！');
            return false;
          }

          if (!img.length) {
            img = '<img src="images/default-head.png" />';
          }

          var wrap_class = !type ? 'i-b-rec-text' : 'i-b-sen-text';
          var pay_class = dir == 'send' ? 'i-pay-send' : 'i-pay-rec';
          var nick = type ? '' : '<p class="i-b-nick">' + name + '</p>';

          var html = $('<div class="' + wrap_class + '"><div class="i-b-pay">' + nick + '<span class="' + pay_class + '"><i></i><em>' + toDecimal2(pay) + '</em><a class="msg-del"></a></span></div></div>');
          html.prepend(img);
          $('.i-body').append(html);
          //显示名称
          $(".radio-i-b-nick:checked").click();
          return false;
        });

        //添加语音对话
        $('body').on('click', '.a-u-dialog-voice a', function () {
          var user = $(this).parents('.add-user');
          var name = user.find('.a-u-name .a-u-data-name').val();
          var img = $(this).parent().parent().find('.a-u-pic-show img').clone();
          var voice = user.find('.a-u-name .a-u-data-voice').val();
          var type = user.find('.a-u-dialog-master a').hasClass('btn-success');

          if (name == '') {
            alert('请输入用户名！');
            return false;
          }

          if (voice == '') {
            alert('请输入语音时间！');
            return false;
          }

          if (isNaN(voice)) {
            alert('您输入的语音时间有误！');
            return false;
          }

          if (!img.length) {
            img = '<img src="images/default-head.png" />';
          }

          var wrap_class = !type ? 'i-b-rec-text' : 'i-b-sen-text';
          var nick = type ? '' : '<p class="i-b-nick">' + name + '</p>';

          var v_len = 0;
          var len = 0;
          v_len = voice > 60 ? 60 : voice;
          len = (360 - 96) / 60 * v_len + 96;

          var unread = '';//type ? '' : '<strong></strong>';

          var html = $('<div class="' + wrap_class + '"><div class="i-b-voice">' + nick + '<span style="width:' + len + 'px"><i></i><b></b><em>' + voice + '\'\'</em>' + unread + '<a class="msg-del"></a></span></div></div>');

          html.prepend(img);
          $('.i-body').append(html);
          //显示名称
          $(".radio-i-b-nick:checked").click();
          return false;
        });

        //主人切换
        $('body').on('click', '.a-u-dialog-master a', function () {
          var parent = $(this).parents('.users');
          parent.find('.a-u-dialog-master a').removeClass('btn-success');
          $(this).addClass('btn-success');
          return false;
        });

        $('.body_bg_del').click(function () {
          $('.i-body').css('background-image', 'none');
          $('.a-u-pic-bodybg img').remove();
          return false;
        });

        $('#add-user').click();

        setTimeout(function () {
          $('.btn-rand-face').click();
          $('.btn-rand-username').click();

          var _title = '';
          $(".a-u-data-name").each(function () {
            _title = $(this).val();
          });

          /*$('.input-common').val(_title);
          $('.i-n-name span').text(_title);*/
        }, 500);
      </script>

    </div>
    <!-- /主体 -->
  </div>

  <!-- 底部 -->

  <div class="pop-pic">
    <img src="#" />
    <div class="tips">
      <p class="tips-mobile">手指按住上面的图片三秒钟保存到手机</p>
      <p class="tips-pc">请将鼠标移动到上面图片上，然后点击鼠标右键，选择保持图片</p>
      <a>继续制作</a>
    </div>
  </div>

  <iframe id="ifm" frameborder="0" class="hide_ifm" src="/wx/blank_wxduihua.html"></iframe>

  <script>
    function makePic(obj) {
      var _this = obj;
      var div = $('#iphone').clone();

      var my_image = $('.my-image');
      var mask = $('.mask');
      if (!my_image.length) {
        my_image = $('<div class="my-image">成功生成图片，点击 <a class="my-image-view" target="_blank" href="#">这里</a> 查看，<a class="my-image-continue" href="#">继续制作</a></div>');
        $('body').append(my_image);
      }
      if (!mask.length) {
        $('body').append('<div class="mask"></div>');
      }

      div.removeClass('iphone-preview');
      div.css({
        zoom: 1,
        position: 'absolute',
        left: 0,
        top: 0
      });
      $('#ifm').contents().find('body').append(div);
      _this.hide();
      $('.loading').show();
      $('.my-image').hide();
      $('.mask').hide();


      html2canvas(div, {
        onrendered: function (canvas) {
          var myImage = canvas.toDataURL("image/png");

          var pop_pic = $('.pop-pic');
          var pop_class = 'pc';
          if (browser.versions.mobile) {
            pop_class = 'mobile';
          }
          pop_pic.find('.tips').addClass(pop_class);
          pop_pic.find('img').attr('src', myImage);

          try {
            pop_pic.show();
          } catch (error) {

          }
          $('#wrapper').hide();
          $('.loading').hide();
          _this.show();


          div.remove();
        }
      });
      return false;
    }
    $(function () {
      $('.pop-pic .tips a').click(function () {
        $('.pop-pic').hide();
        $('#wrapper').show();
      });

      $('#save').click(function () {
        start_make($(this));
      });

      /*背景选择ss*/
      $(".btn-bgModal").click(function () {
        var _arr = ['images/bg/12.jpeg', 'images/bg/13.jpeg', 'images/bg/11.jpeg', 'images/bg/10.jpeg', 'images/bg/9.jpeg', 'images/bg/8.jpeg', 'images/bg/7.jpeg', 'images/bg/6.jpeg', 'images/bg/5.jpeg', 'images/bg/4.jpeg', 'images/bg/2.jpeg', 'images/bg/3.jpeg', 'images/bg/1.png', 'images/bg/1.jpeg'];
        var _html = '<ul>';
        for (var i in _arr) {
          _html += '<li><a href="javascript:void(0);"><img src="picture/56b76067c0444761b633389802e7c352.gif' + _arr[i] + '" ></a></li>';
        }
        _html += '</ul>';
        //选择背景
        _html = $(_html)
        _html.find('img').click(function () {
          var src = $(this).attr('src');
          $('.a-u-pic-bodybg img').attr("src", src);
          $('.i-body').css('background-image', 'url('images / 4f3daeac1d0d495191cbecdc3ca9b5b2.gif')');

        });
        $("#bglist").html(_html);
      });

    });
  </script>


  <script type="text/javascript">
    (function () {
      var ThinkPHP = window.Think = {
        "ROOT": "", //当前网站地址
        "APP": "", //当前项目地址
        "PUBLIC": "/Public", //项目公共目录地址
        "DEEP": "/", //PATHINFO分割符
        "MODEL": ["2", "", "html"],
        "VAR": ["m", "c", "a"]
      }
    })();
  </script>
  <div style="display: none">
    <script>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?010af47f72a51e97131f1828d7caabb8";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  </div>
</body>

</html>