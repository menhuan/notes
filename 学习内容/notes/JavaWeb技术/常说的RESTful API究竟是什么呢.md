# RESTful API

## 前言

最近闲来无事，何不浪荡一番，铛铛铛铛。

huan: 浪荡啥？你的api接口写完了吗？

琪琪：**啥玩意？？？**，还接口？？ 不逗给你了嘛？

huan: www.jikelearn.cn/users/getUsers .这就是你给我的用户api嘛？

琪琪： 咦，这话中有话啊，貌似上次开会说我们要使用RESTful API。

琪琪： 那个，huanhuan,咱们是不是要采用RESTful API 啊？

huan: 你才想起来啊，赶紧的，修改去，别让领导知道你没按规则来，**不然打死你**，ps:吓唬吓唬这小子，让他不按规则办事。

## RESTful中的HTTP 动词

琪琪：修改就修改，等会，RESTful 是什么来，。。我都没问清楚，怎么修改。不行，不能问huanhuan,得换个人问，不然会被笑话的。我就去问lili吧。

琪琪： 丽丽姐，你知道我们要用的RESTful API是什么吗？

lili: 你想是的是格式还是由来呢？

琪琪： 丽丽姐全部都来讲解下？走走咱们去会议室聊聊。

lili: ....

琪琪： 丽丽姐，介绍下RESTful API吧。

丽丽： RESTful API 一句话来说呢就是 一套协议规范多重形式的前端和同一个后台的交互方式。

琪琪： 那跟我们原先传统用的GET,POST方法有什么区别呢？我们不也是这样嘛？

丽丽： 在RESTful中设计方法不止有这两种，还有HEAD,PUT,PATCH,DELETE,OPTIONS 等模式。并且接口模式与原先的操作也是不同的。

琪琪：那这些动词使用的方式是怎么样的呢？比如GET，POST。

丽丽 ： 好吧，我就一个个的给你讲解下。

- GET : 我们使用它来获取资源，可以取出单个的一项资源或者多项资源。在设计的时候获取资源都是采用他。eg：jikelearn.cn/users,jikelearn.cn/users/{id} 获取某个用户 根据id来获取。**一般对应数据库的操作是select**

- POST : 在服务器上用来新建立一个资源，对应的数据库操作**一般是insert**.eg：jikelearn.cn/users/{username}

- PUT : 在服务端更新资源（ps:完整的数据内容，比如有个用户实体，实体里面包含整个用户的完整属性内容，客户端需要把整个实体内容全部提供到服务器）。对应的数据库操作是**UPDATE**。eg: jikelearn.cn/users/{username}。 

- PATCH : 在服务端 进行资源的更新，(注意这里提供的是客户端只提供改变的属性内容) ，对应的数据库操作是**UPDATE**. eg：jikelearn.cn/users/{username}.

- DELETE : 从服务进行删除资源，对应的数据库操作一般是 delete.但是很多时候我们有些数据是不能删除的，只是对于用户来说是不可见的操作。也可以采用该操作。

- HEAD: 只是用来获取资源的元数据的，我们使用的不是很多。
  
琪琪： 哇喔，这么多动词操作呢，每一个都对应一个操作。

丽丽：是的，这就是RESTful的特点。

## RESTful 的由来

琪琪：那我知道他们的动词了，就可以进行按照这个格式进行开发，但是这个RESTful怎么由来的？让我很好奇呢。

丽丽： RESTful 其实主要理解 Representational State Transfer.

琪琪： 这是什么意思？

丽丽： 我在具体的说下，小黑板来了哦。

### 资源Resources

资源吧，在这里就是我们在网络上的一个具体信息。这个信息可以使json,txt,图片等内容。但是我们总可以用一个**URI**来进行表示，每一个动作都有自己的特定的URI，就称为独一无二的标识符了。

更简单来说，不就是我们传输过来接嘛。

### 表现层

我们有链接了，但是怎么把数据给我们的服务器呢？在这里我们称它为表现层了。

我们使用表现层表示我们传输的数据是什么格式的。比如你要传输json格式数据，我们就需要在http的头里面指定Accept与Content-type的类型与json的。

### 状态转化

有了URI链接，有了要传输的数据资源，那么我们是否就可以传输数据了呢？

nono不可以的，我们还需要有访问的方法呢。比如，朋友让我们帮忙带一份资料过去 。

我们知道朋友的地址（URI），然后还要有携带的数据资料（json），但是我们怎么才用带过去呢？（比如快递，比如打车过去），这些动作对应着我们的GET,POST,DELETE,PATH，用这些来代表我们操作的方式。


有了以上内容，我们就可以执行RESTful了。

琪琪： 哇喔，好的我理解了，谢谢丽丽姐。

lili: 对了，我还想补充一些内容。

## RESTful 一些其他规范

lili : 琪琪 你也看到了，我们在对于一些操作的时候是完全可以使用RESTful来定义整个流程的，但是还有一些操作是我们无法避免用RESTful那种格式来操作的，所以采用以下方式来使用。

eg: jikelearn.cn/session/_login 。 我们登陆操作，无法使用一个具体的行为来表示的时候，再一个操作前面加** _ **, 然后再加自己定义的名称即可。

琪琪: 哦哦，这样我们也可以按照统一的规则来进行了。

lili: 是的，这是其中一个大家默认的一个规范，我再给你举一些其他的RESTful例子，你可以看下。

```api
jikelearn.cn/users/{userId}/company/{companyId}
jikelearn.cn/users/{userId}/department/{departmentId}
jikelearn.cn/users/{userId}/student/{studentId}
```

你看这些，当出现级联关系时，我们也都是把这些放入到URI链接中的。这样也可以使用我们制定好的规范。

这样我们弄得接口都是规整的，不是大家随意写出来的乱七八糟的情况。

## 总结

最后用三句话总结下RESTful:

  1. 每一个URI代表一种资源；

  2.  客户端和服务器之间，传递这种资源的某种表现层；

  3. 客户端通过四个HTTP动词，对服务器端资源进行操作，实现"表现层状态转化"。


