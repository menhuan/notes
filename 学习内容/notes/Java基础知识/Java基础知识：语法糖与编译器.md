# 语法糖与编译器

编译器涉及到的工作，自动拆箱与自动装箱，泛型与类型擦除，桥接的方法，其他。

五种内容

## 自动拆箱与自动装箱

在Java中一般都是使用对象来实现编程，但是有时候为了保证性能，也可以使用基本类型减少性能的损耗。还有个原因需要使用那是因为很多核心库的API是面向对象的。

自动装箱与自动拆箱有隐式转换也有显式转换，并且类型转换有性能损耗。

int的值在某个范围内会返回缓存的Integer对象，如果不是在范围之内会重新new 一个Integer对象。

## 泛型与类型擦除

泛型只支持包装类型，在Java中添加参数是Object类型，但是我们使用泛型的时候指定具体参数。

```Java
List<Integer> list = new ArrayList<>();
list.add(1);
```

在取出来数据的时候会做类型向下转换的操作，我们知道Integer是Object的子类。

这就是泛型的类型擦除。 这么做的目的是兼容引入泛型之前的代码。

### 泛型擦除

泛型擦除有两种情况一种就是我们上面所说的向下转换对象。

另外一种就是限定了继承类的泛型参数。经过泛型的擦除后，所有的泛型参数都会变成限定的继承类。

泛型类型会被擦除还有必要使用吗？可以让编译器判断程序中的语法是否正确。添加的对象类型不同，语法就过不去。

## 桥接方法

桥接方法是重写父类的方法，然后调用子类的方法。这之间会用到参数类型的转换从父类转换为子类。

桥接方法的访问标识符除了代表桥接方法的ACC_BRIDGE之外还有ACC_SYNHETIC，表示该方法对于Java源码是不可见的。

如果子类定义了一个与父类类型相同的方法，其返回类型为父类方法返回类型的子类，编译器也会为其生成桥接方法。

Class中允许出现两个同名的，同参数类型但是不同返回类型的方法。也是采用的桥接方法，同样标注了ACC_SYNTHETIC.因此会调用到原方法。
