# 堆的应用

堆主要分为两种，大顶堆与小顶堆。

- 大顶堆：从大到小，排序好的，
- 小顶堆：从小到大，排序好的。

堆的时间复杂度插入与删除都是O(logn)。

## 应用

### 应用1优先级队列

优先级队列，使用堆实现是最直接，最有效的方式。

往优先级队列中插入数据相当于给堆中插入数据，从优先级队列中取出优先级最高的数据，就相当于取出堆顶元素。

#### 合并小文件

当有100个有序小文件，各取一个字符放到堆中进行比较，由于堆中数据已经形成排序好的数据，然后在放入文件中。删除选择出来最小的数据。

#### 高性能定时器

定时器任务维护，在平常实现中，经常会采用循环遍历的方式达到时间就进行执行任务，但一个特点是每秒或者每隔一段时间进行扫描，性能损耗比较严重。

如果放到堆中，根据时间与当前的时间进行计算，进行时间差之后再开始执行任务，任务动态添加后，改变时间差。

### 利用堆求topk

- 静态数据进行直接循环放入指定topk的堆中。
- 动态数据，循环遍历这个数据n个元素，堆化操作时间复杂度是O(logn)。

则动态数据则是O(nlogK).

每次询问前都需要进行计算。

### 中位数

也是分为静态数据与动态数据。

#### 静态数据

静态数据 中位数是固定的，先进行排序，然后区分奇数与偶数，找出来中位数即可。

动态数据，不用排序的方式来实现。使用大顶堆与小顶堆两个堆来实现。

大顶堆中存储前半部分数据，从大到小，小顶堆中存储后半部分数据，在数据规整的时候小顶堆的数据全部都大于大顶堆上的数据，这样中位数数据存在于大顶堆定点或者小顶堆定点。
