# 算法

算法在负载均衡，数据分辨，分布式存储的应用。

## 负载均衡

哈希算法实现负载均衡，是可以对数据进行求哈希值，然后进行取模映射到我们的对应的服务器上。
比如对IP地址求哈希，30台机器，哈希值对30取模运算，这样ip数据就映射到相同的机器上了。

## 数据分区

1. 统计搜索关键词出现的次数
问题：1T的数据量，统计每次关键词出现的搜索次数。
难点：日志数据规模大，一台机器处理速度慢。
n台机器进行处理数据，读取数据然后进行哈希运算在对N取模分配到对应的机器上。然后每个机器处理对应的数据最后再把值进行合并起来。MapReduce的思想就是如此。
2. 判断图片在图库中
问题： 图片中有1亿张图片、进行判断图片是否在图库中。
难点：图片数量大，构建散列表形式内存放不下。
方案：根据图片标识进行分片，然后分配到多台机器上。再对图片进行分配到散列表中。每个散列表保存图片数据。 
判断一个图片存不存在图库中，先进行哈希，取模机器，去机器中的散列表中找图片是否存在。

## 分布式存储

要用到的最多的是一致性哈希算法。
数据范围是[0,Max],然后划分m个小区间，k个机器、每个机器负责m/k个区间。新机器加入进来，将几个小区间的数据迁移到新机器中。不用全部哈希和迁移数据。保持了数据量的均衡。
