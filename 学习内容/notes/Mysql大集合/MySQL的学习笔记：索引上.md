# 索引的常见模型
哈希表，有序数组和搜索树。
- 哈希表，k-v存储的数据结构。
   容易出现哈希冲突，需要用链表的方式解决。查询某个值需要先计算出哈希值，然后找到对应的桶位置，在遍历链表找到对应的数据。
  不是有序的，所以区间查询的速度很慢，适用于等值查询的场景。
- 有序数组
   在等值查询和范围查询，表现优秀。查询效率比较高，但是插入与删除就比较困难。需要移动数组里面的内容。  
   适合存储静态存储引擎。
- 二叉树搜索树：
  每个左节点小于父节点，右节点大于父节点。时间复杂度是O(log(N)).保持这个时间复杂度，二叉树需要保持平衡。

  InnoDB中，索引采用是N叉树，第二层的很大概率保存在内存当中，减少访问磁盘的次数。

#InnoDB的索引模型
采用的是B+树组建索引，很好的配合磁盘的读写特性，减少单次查询磁盘的访问次数。

根据叶子节点的内容，索引分为主键索引和非主键索引。

主键索引，保存的是整行数据，也被成为聚簇索引。

非主键索引叶子节点内容是主键的值，在InnoDB里面，非主键索引被称为二级索引。

非主键索引需要先搜索到主键索引值，然后通过主键索引找到对应的行内容。

# 索引维护
B+树为了维持索引的有序性，需要进行数据的移动。包含页分裂，与页的合并。
会影响性能与页的利用率。

自增的主键索引都是新纪录保持的是追加的操作。不涉及到挪动其他记录信息，也不会触发页的分裂。

主键长度越长，普通索引的叶子节点就越小，普通索引占用的空间就越小。

# 问题 重建索引的操作
重建普通索引可以使用alter table T drop index k , add index k 。
主键索引不建议这么做，主键索引重建立都需要将整个表重建。
直接使用 alter table T engine = InnoDB。