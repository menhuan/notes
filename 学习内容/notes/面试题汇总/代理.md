# 代理面试题汇总

关于代理主要由以下的题目要求。

- 代理的原理是什么？
- 静态代理与动态代理的区别
- 为什么要用代理（就是代理的应用场景）
- JDK中动态代理与cglib中的动态代理有什么不同？（考察实现方式以及优缺点）

## 代理的原理是什么

代理就是应该我们来做的事情，现在交给代理人来做，我们专门做自己专心的事情就好，比如我们是研发就专门做代码编辑，而关于这个产品的需求什么的都交给产品经理来做。

使用代理和不使用代理，内部的逻辑不会发生改变，改变的是外部的代理调用。
通过使用代理解决的是我们专注于自己的事情，其他事情都交给对应的代理去做。

所有代理可以被看做为是对调用目标的一个包装，我们对目标代码的调用不是通过直接调用完成的，而是通过创建的代理完成的。

## 静态代理与动态代理的区别

代理主要分为两种，就是静态代理与动态代理。也是代理的发展演进，现有的静态代理，后有的动态代理。

### 静态代理

静态代理是在写代码的时候就编写好对应的代理类，或者接口。这样每增加一个代理类都需要生成，麻烦。当然也可以使用工具生成。

### 动态代理

动态代理是在运行时，根据需要，自动生成代理对象（类或者接口）,缺点就是每次在运行时生成就需要**消耗时间。**。

## 为什么要用代理

在应用内，很多场景都是跟我们业务是没有关系的，这时候通过代理的方式帮助我们解决。

### 业务无关的代码

比如说，系统的用户权限校验，在一些场景下，是需要对用户进行权限检验后才能进行下一步的操作，而用户权限的校验逻辑可能会随时发生变动，
这对于调用者来说，并不关心里面内部的实现，只关注最终的结果有没有权限。

而使用代理后，在我们要做业务逻辑之前,代理去帮助我们去做校验的事情.这样后期在这种业务逻辑的前后增加个性化需求也是很简单的。

### 调用者与实现者解耦

比如RPC调用。在微服务架构中，我们常见的就是GRPC调用，GRPC调用的方式就是通过代理的方式实现。通过代理提供了一种更方便的操作方式，以及减少重量级对象的创建，在需要时再创建。

## JDK中动态代理与cglib中的动态代理有什么不同？

Java中常用的代理有两种，分别为JDK中的代理实现，另外一种cglib代理的实现的。

### JDK中的动态代理

JDK代理的实现是通过接口来实现的，定义好接口规范后，通过Proxy类产生代理对象调用被创建对象的操作即可。

其中我们主要使用的是一个接口InvocationHandler接口和一个类Proxy，

InvocationHandler接口是用来给代理类具体实现用的，负责处理被代理对象的操作。



