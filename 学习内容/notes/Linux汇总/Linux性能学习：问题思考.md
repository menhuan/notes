# 问题思考

## 关于阻塞与非阻塞，异步与非异步IO的问题

### 阻塞与非阻塞

- 阻塞IO: 应用程序在执行I/O操作后，没有获得响应，需要阻塞线程，不能执行其他任务。
- 非阻塞IO: 应用程序执行IO操作后，可以通过回调的方式得到执行结果，不必等待该执行结果。

### 同步与非同步

- 同步IO:收到IO操作后，系统需要等待程序处理完成后，系统才会得到应用程序IO的结果。
- 非同步：收到IO后，会告知IO已经收到，再异步处理，等结果出来以后通过事件的方式告知程序结果。

这两种表面上看是类似的，从两个不同的方面对IO进行的划分。

同步与非同是针对的I/O执行者，阻塞与非阻塞是针对的应用系统。 站立的角色不同，展示不同的结果。

## 文件系统

find 命令执行 find / -name fileName  执行查找，也可以加 -type -f 参数作为参考 。

find 查找的是文件或者文件目录的名字，我们知道文件名字与文件目录之间的关系都是在目录的缓存中的，也就是内存当中。

在查找文件的时候Linux 就会动态构建不在缓存中的目录结构，导致dentry 升高。

同时，buffer与cache 也会升高，可以使用vmstat  观察情况。

buffer的增长会构建目录项的缓存所需的元数据，需要从文件系统中读取，比如文件名称，索引的节点。

## 磁盘IO的延迟

磁盘IO出现问题一般先通过以下步骤查找。

- 通过top确定是否存在io性能问题。
- 通过iostat 来查看io具体性能问题
- pidstat来检查是哪一个进程的问题。
- 找到进程后与线程后，通过strace 来跟踪，当跟踪不到内容时刻，可以加上参数-f 跟踪多进程与多线程。
