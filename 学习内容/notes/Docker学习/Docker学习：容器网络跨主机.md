# 跨主机网络

Flannel项目思考起来。 Flnannel项目是一个框架，后端实现三种方式提供容器的网络功能。

- VXLAN
- host-gw
- UDP

## UDP

三种方式中最差的一种实现方式。但又是最早的实现方式，用来参考学习。

构建两个不同主机网络。

1. 宿主机1容器1，ip地址是100.96.1.2，docker0网桥地址是100.96.1.1/24；
2. 宿主机2容器2，ip地址是100.96.2.3，docker0网桥地址是100.96.2.1/24;

从容器1发送ip包源地址就是100.96.1.2，目的ip地址就是100.96.2.3,但容器1与容器2不在同一个宿主机上，则ip也没有挂载在同一个网桥下。则无法访问。

但我们知道IP包的去下一个目的地，取决于宿主机上的路由规则。通过Flannel创建一系列的路由规则。

1. 宿主机1容器1发送出IP包，包含目的地IP地址信息.进入到docker0二层交换机上。
2. 通过Flannel创建的路由规则路由到flannel0设备上。ps 就是一个Tunnel设备。Tunnel设备在Linux中是工作在三层的虚拟网络设备。用来**在操作系统内核和用户程序之间传递IP包**。
3. 